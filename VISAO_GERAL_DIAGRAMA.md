# ğŸ¨ VISÃƒO GERAL DO PROJETO - DIAGRAMA VISUAL

RepresentaÃ§Ã£o visual do OrchHub e seus componentes.

---

## ğŸ—ï¸ ARQUITETURA GERAL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INTERNET / USUÃRIOS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ HTTPS (SSL/TLS)
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 NGINX (Reverse Proxy)                       â”‚
â”‚              â†“ Port 80/443 (www)                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚    Load Balancing & SSL Termination    â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ /app (static)            â”‚ /api
           â”‚                          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   FRONTEND  â”‚          â”‚     BACKEND     â”‚
    â”‚  (Vite app) â”‚          â”‚   (NestJS API)  â”‚
    â”‚  Port 3001  â”‚          â”‚   Port 3000     â”‚
    â”‚             â”‚          â”‚                 â”‚
    â”‚  â€¢ React 18 â”‚          â”‚  â€¢ Controllers  â”‚
    â”‚  â€¢ Tailwind â”‚          â”‚  â€¢ Services     â”‚
    â”‚  â€¢ TypeScript           â”‚  â€¢ DTOs         â”‚
    â”‚  â€¢ Lucide   â”‚          â”‚  â€¢ Guards       â”‚
    â”‚             â”‚          â”‚  â€¢ Filters      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚ SQL
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   PostgreSQL 15   â”‚
                            â”‚    Port 5463      â”‚
                            â”‚                   â”‚
                            â”‚  â€¢ Prisma ORM    â”‚
                            â”‚  â€¢ Migrations    â”‚
                            â”‚  â€¢ 12 Models     â”‚
                            â”‚                   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š FLUXO DE DADOS - ORÃ‡AMENTO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend â”‚ UsuÃ¡rio clica "Novo OrÃ§amento"
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ POST /invoices
     â”‚ { clientId, items: [...] }
     â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Backend API (NestJS)   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ InvoicesController   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚ validate DTO     â”‚
â”‚       â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ InvoicesService     â”‚ â”‚
â”‚  â”‚ â€¢ calc total        â”‚ â”‚
â”‚  â”‚ â€¢ gen URL public    â”‚ â”‚
â”‚  â”‚ â€¢ create invoice    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ save to DB
         â”‚
     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚     PostgreSQL Database    â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚ â”‚   Invoice Table      â”‚   â”‚
     â”‚ â”‚ â€¢ id                 â”‚   â”‚
     â”‚ â”‚ â€¢ clientId (FK)      â”‚   â”‚
     â”‚ â”‚ â€¢ total              â”‚   â”‚
     â”‚ â”‚ â€¢ status             â”‚   â”‚
     â”‚ â”‚ â€¢ publicUrl (unique) â”‚   â”‚
     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚ â”‚   InvoiceItem Table  â”‚   â”‚
     â”‚ â”‚ â€¢ invoiceId (FK)     â”‚   â”‚
     â”‚ â”‚ â€¢ productId/serviceIdâ”‚   â”‚
     â”‚ â”‚ â€¢ variationId        â”‚   â”‚
     â”‚ â”‚ â€¢ quantity, price    â”‚   â”‚
     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ return created invoice
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Frontend Response     â”‚
â”‚ { id, total, publicUrl }  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ FLUXO DE USUÃRIOS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USUÃRIO NÃƒO AUTENTICADO (PÃºblico)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ Acessa / â”‚ Home page
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
    â”œâ”€ /products â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Marketplace (pÃºblico)
    â”œâ”€ /coupons  â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Cupons (pÃºblico)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Clica "Login"       â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ POST /auth/login
         â”‚ { email, password }
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Backend valida JWT     â”‚
    â”‚   Retorna token          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ localStorage.token
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   USUÃRIO AUTENTICADO (Admin)   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                             â”‚
    â”œâ”€ /admin/invoices     â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar orÃ§amentos
    â”œâ”€ /admin/clients      â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar clientes
    â”œâ”€ /admin/products     â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar produtos
    â”œâ”€ /admin/services     â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar serviÃ§os
    â”œâ”€ /admin/coupons      â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar cupons
    â”œâ”€ /admin/categories   â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar categorias
    â”œâ”€ /admin/brands       â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar marcas
    â”œâ”€ /admin/groups       â”€â”€â”€â”€â”€â”€â”€â”¤ Gerenciar grupos
    â”‚                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” AUTENTICAÃ‡ÃƒO JWT

```
Frontend                     Backend
  â”‚                            â”‚
  â”œâ”€ POST /auth/login â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚   email, password          â”‚
  â”‚                            â”œâ”€ Hash comparaÃ§Ã£o
  â”‚                            â”œâ”€ Gerar JWT
  â”‚â—„â”€â”€â”€â”€â”€â”€ { token } â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                            â”‚
  â”œâ”€ localStorage.setItem      â”‚
  â”‚   ('token', token)         â”‚
  â”‚                            â”‚
  â”œâ”€ GET /invoices â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚   Authorization: Bearer    â”‚
  â”‚   {token}                  â”‚
  â”‚                            â”œâ”€ Verificar JWT
  â”‚                            â”œâ”€ Extrair userId
  â”‚â—„â”€ { invoices[] } â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚   (filtrado por user)      â”‚
```

---

## ğŸ“¦ COMPONENTES FRONTEND

```
App.tsx (Root)
â”‚
â”œâ”€ Layout
â”‚  â”œâ”€ AdminLayout (private)
â”‚  â”‚  â”œâ”€ Header (com logo + user)
â”‚  â”‚  â”œâ”€ Sidebar (menu navegaÃ§Ã£o)
â”‚  â”‚  â””â”€ Main content
â”‚  â”‚
â”‚  â””â”€ PublicLayout (public)
â”‚     â””â”€ Simple header + footer
â”‚
â”œâ”€ Pages (13 pÃ¡ginas)
â”‚  â”‚
â”‚  â”œâ”€ Public
â”‚  â”‚  â”œâ”€ Home
â”‚  â”‚  â”œâ”€ ProductsPublicPageNew
â”‚  â”‚  â”œâ”€ CouponsPublicPageNew
â”‚  â”‚  â””â”€ PublicInvoicePageNew
â”‚  â”‚
â”‚  â””â”€ Admin
â”‚     â”œâ”€ InvoicesPageNew
â”‚     â”œâ”€ ClientsPageNew
â”‚     â”œâ”€ ProductsPageNew
â”‚     â”œâ”€ ServicesPageNew
â”‚     â”œâ”€ CouponsPageNew
â”‚     â”œâ”€ CategoriesPageNew
â”‚     â”œâ”€ BrandsPageNew
â”‚     â””â”€ GroupsPageNew
â”‚
â”œâ”€ Components (reutilizÃ¡veis)
â”‚  â”‚
â”‚  â”œâ”€ UI (8 componentes)
â”‚  â”‚  â”œâ”€ Button
â”‚  â”‚  â”œâ”€ Card
â”‚  â”‚  â”œâ”€ Input
â”‚  â”‚  â”œâ”€ Select
â”‚  â”‚  â”œâ”€ Modal
â”‚  â”‚  â”œâ”€ Badge
â”‚  â”‚  â”œâ”€ Table
â”‚  â”‚  â””â”€ Loading
â”‚  â”‚
â”‚  â””â”€ Common (5 componentes)
â”‚     â”œâ”€ AdminLayout
â”‚     â”œâ”€ PageHeader
â”‚     â”œâ”€ SearchBar
â”‚     â”œâ”€ EmptyState
â”‚     â””â”€ Loading
â”‚
â”œâ”€ Services
â”‚  â””â”€ api.ts (Axios client com JWT)
â”‚
â”œâ”€ Store
â”‚  â””â”€ Global state (se necessÃ¡rio)
â”‚
â””â”€ Types
   â”œâ”€ index.ts
   â”œâ”€ Invoice
   â”œâ”€ Product
   â”œâ”€ Client
   â””â”€ ... other types
```

---

## ğŸ”§ ESTRUTURA BACKEND

```
Backend (NestJS)
â”‚
â”œâ”€ src/
â”‚  â”‚
â”‚  â”œâ”€ main.ts (entry point)
â”‚  â”œâ”€ app.module.ts (root module)
â”‚  â”‚
â”‚  â”œâ”€ modules/
â”‚  â”‚  â”œâ”€ auth/
â”‚  â”‚  â”‚  â”œâ”€ auth.module.ts
â”‚  â”‚  â”‚  â”œâ”€ auth.service.ts
â”‚  â”‚  â”‚  â”œâ”€ auth.controller.ts
â”‚  â”‚  â”‚  â””â”€ strategies/
â”‚  â”‚  â”‚     â””â”€ jwt.strategy.ts
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ clients/
â”‚  â”‚  â”‚  â”œâ”€ clients.module.ts
â”‚  â”‚  â”‚  â”œâ”€ clients.service.ts
â”‚  â”‚  â”‚  â”œâ”€ clients.controller.ts
â”‚  â”‚  â”‚  â””â”€ dto/
â”‚  â”‚  â”‚     â”œâ”€ create-client.dto.ts
â”‚  â”‚  â”‚     â””â”€ update-client.dto.ts
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ products/
â”‚  â”‚  â”‚  â”œâ”€ products.module.ts
â”‚  â”‚  â”‚  â”œâ”€ products.service.ts
â”‚  â”‚  â”‚  â”œâ”€ products.controller.ts
â”‚  â”‚  â”‚  â””â”€ dto/
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ invoices/
â”‚  â”‚  â”‚  â”œâ”€ invoices.module.ts
â”‚  â”‚  â”‚  â”œâ”€ invoices.service.ts
â”‚  â”‚  â”‚  â”œâ”€ invoices.controller.ts
â”‚  â”‚  â”‚  â””â”€ dto/
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ coupons/
â”‚  â”‚  â”œâ”€ services/
â”‚  â”‚  â”œâ”€ categories/
â”‚  â”‚  â”œâ”€ brands/
â”‚  â”‚  â””â”€ groups/
â”‚  â”‚
â”‚  â”œâ”€ common/
â”‚  â”‚  â”œâ”€ decorators/ (custom JWT decorator)
â”‚  â”‚  â”œâ”€ guards/ (JWT guard)
â”‚  â”‚  â”œâ”€ filters/ (exception filters)
â”‚  â”‚  â””â”€ pipes/ (validation pipes)
â”‚  â”‚
â”‚  â””â”€ database/
â”‚     â””â”€ prisma.service.ts
â”‚
â”œâ”€ prisma/
â”‚  â”œâ”€ schema.prisma
â”‚  â”œâ”€ seed.ts
â”‚  â””â”€ migrations/
â”‚
â””â”€ dist/ (compiled output)
```

---

## ğŸ—„ï¸ MODELO DE DADOS

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Company   â”‚
                    â”‚  (empresa)  â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ 1:N
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                              â”‚
          â–¼ 1:N                          â–¼ 1:N
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    User    â”‚                â”‚   Client   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ id         â”‚                â”‚ id         â”‚
    â”‚ email      â”‚                â”‚ name       â”‚
    â”‚ password   â”‚                â”‚ email      â”‚
    â”‚ companyId  â”‚                â”‚ phone      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ companyId  â”‚
                                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ 1:N
                                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚    Invoice      â”‚
                                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                   â”‚ id              â”‚
                                   â”‚ clientId (FK)   â”‚
                                   â”‚ total           â”‚
                                   â”‚ status          â”‚
                                   â”‚ publicUrl       â”‚
                                   â”‚ createdAt       â”‚
                                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚ 1:N
                                   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  InvoiceItem    â”‚
                                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                   â”‚ id              â”‚
                                   â”‚ invoiceId (FK)  â”‚
                                   â”‚ productId (FK)  â”‚
                                   â”‚ variationId(FK) â”‚
                                   â”‚ quantity        â”‚
                                   â”‚ price           â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Product    â”‚      â”‚   Service    â”‚      â”‚    Coupon    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚      â”‚ id           â”‚      â”‚ id           â”‚
â”‚ name         â”‚      â”‚ name         â”‚      â”‚ title        â”‚
â”‚ description  â”‚      â”‚ description  â”‚      â”‚ code         â”‚
â”‚ categoryId   â”‚      â”‚              â”‚      â”‚ platform     â”‚
â”‚ brandId      â”‚      â”‚              â”‚      â”‚ affiliateUrl â”‚
â”‚ groupId      â”‚      â”‚              â”‚      â”‚ expiresAt    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ active       â”‚
     â”‚ 1:N                 â”‚ 1:N            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProductVariation  â”‚  â”‚ ServiceVariation  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                â”‚  â”‚ id                â”‚
â”‚ productId (FK)    â”‚  â”‚ serviceId (FK)    â”‚
â”‚ name              â”‚  â”‚ name              â”‚
â”‚ price             â”‚  â”‚ price             â”‚
â”‚ affiliateUrl      â”‚  â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Category    â”‚  â”‚    Brand     â”‚  â”‚    Group     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚  â”‚ id           â”‚  â”‚ id           â”‚
â”‚ name         â”‚  â”‚ name         â”‚  â”‚ name         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ³ DOCKER STRUCTURE

```
OrchHub/
â”‚
â”œâ”€ docker-compose.yml
â”‚  â”œâ”€ Backend service (port 3000)
â”‚  â”‚  â””â”€ Volume: /backups
â”‚  â”œâ”€ Frontend service (port 3001)
â”‚  â””â”€ PostgreSQL service (port 5463)
â”‚
â”œâ”€ backend/
â”‚  â”œâ”€ Dockerfile
â”‚  â”œâ”€ src/ (TypeScript code)
â”‚  â””â”€ package.json
â”‚
â”œâ”€ frontend/
â”‚  â”œâ”€ Dockerfile
â”‚  â”œâ”€ src/ (React code)
â”‚  â””â”€ package.json
â”‚
â””â”€ deploy/
   â”œâ”€ docker-compose.prod.yml
   â”œâ”€ env.prod.example
   â”œâ”€ nginx.conf
   â””â”€ deploy.sh
```

---

## ğŸ“Š FLUXO DE APROVAÃ‡ÃƒO DE ORÃ‡AMENTO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OrÃ§amento   â”‚
â”‚  Criado      â”‚ (status: DRAFT)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Admin clica "Enviar"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status: SENT    â”‚ (jÃ¡ foi enviado ao cliente)
â”‚  Link gerado     â”‚ (publicUrl)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Email enviado para cliente
       â”‚ com link pÃºblico
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cliente clica no link pÃºblico â”‚
â”‚  /invoices/public/{publicUrl}  â”‚
â”‚                                â”‚
â”‚  VÃª: Cliente (read-only)       â”‚
â”‚      Itens (read-only)         â”‚
â”‚      Total (read-only)         â”‚
â”‚      2 botÃµes:                 â”‚
â”‚      - [Aprovar]               â”‚
â”‚      - [Recusar]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                 â”‚
    â”‚ APROVA   RECUSA â”‚
    â”‚    â”‚         â”‚  â”‚
    â”‚    â–¼         â–¼  â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
    â”‚ â”‚APROV â”‚ â”‚RECUS â”‚
    â”‚ â”‚OVED  â”‚ â”‚ED    â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€â–º Admin vÃª status
        atualizado
        NÃ£o pode mais editar
        se APPROVED
```

---

## ğŸ¯ Funcionalidades Mapa

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ORCHUB - FUNCIONALIDADES                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   PÃšBLICA      â”‚    â”‚    AUTENTICADA   â”‚
        â”‚   (sem login)  â”‚    â”‚    (com login)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚      â”‚                     â”‚
        â”œâ”€ Marketplace  â”‚      â”œâ”€ Criar OrÃ§amentos  â”‚
        â”œâ”€ Cupons       â”‚      â”œâ”€ Gerenciar Clientesâ”‚
        â”œâ”€ Detalhes Prodâ”‚      â”œâ”€ Gerenciar Produtosâ”‚
        â””â”€ Ver OrÃ§amento        â”œâ”€ Gerenciar ServiÃ§osâ”‚
           (via link)           â”œâ”€ Gerenciar Cupons  â”‚
                               â”œâ”€ ConfiguraÃ§Ãµes     â”‚
                               â”‚  (Cat/Marca/Grupo) â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Status dos MÃ³dulos

```
âœ… Frontend (React)
   â”œâ”€ âœ… 13 pÃ¡ginas
   â”œâ”€ âœ… 16 componentes
   â”œâ”€ âœ… Responsivo
   â””â”€ âœ… TypeScript

âœ… Backend (NestJS)
   â”œâ”€ âœ… 9 controllers
   â”œâ”€ âœ… 50+ endpoints
   â”œâ”€ âœ… JWT auth
   â””â”€ âœ… ValidaÃ§Ãµes

âœ… Database (PostgreSQL)
   â”œâ”€ âœ… 12 modelos
   â”œâ”€ âœ… Migrations
   â”œâ”€ âœ… Seed data
   â””â”€ âœ… Ãndices

âœ… DevOps (Docker)
   â”œâ”€ âœ… 3 containers
   â”œâ”€ âœ… Healthchecks
   â”œâ”€ âœ… Volumes
   â””â”€ âœ… Networks
```

---

**Ãšltima atualizaÃ§Ã£o:** 15/01/2026
