Contexto do Projeto
Voc√™ est√° trabalhando em um sistema web de or√ßamentos (Invoices), com frontend em React e backend em Node/NestJS (ou equivalente), utilizando banco de dados relacional.
A tela atual de or√ßamentos precisa ser refatorada visualmente e logicamente, mantendo compatibilidade com dados existentes, mas reorganizando fluxos, estados, regras de neg√≥cio e experi√™ncia do usu√°rio.

üéØ Objetivo Geral

Refatorar a tela http://localhost:3001/admin/invoices e toda a l√≥gica relacionada a listagem, cria√ß√£o, edi√ß√£o, clonagem, visualiza√ß√£o p√∫blica e exporta√ß√£o de or√ßamentos, conforme as regras abaixo.

1Ô∏è‚É£ Tela Inicial ‚Äì Listagem de Or√ßamentos

Ao acessar http://localhost:3001/admin/invoices:

Visualiza√ß√£o

Permitir alternar entre:

Grid

Cards

Kanban

Os or√ßamentos devem estar agrupados por status:

Rascunho

Pronto

Vencido

Aprovado

Recusado

Conclu√≠do

Faturado

Desistido

Abandonado

Dados exibidos em cada or√ßamento

C√≥digo

Cliente

Criado em

Status

Valor Total

Filtros (com sele√ß√£o m√∫ltipla)

Clientes

Servi√ßos

Produtos

Status

A√ß√µes Globais

Exportar o resultado filtrado para PDF

2Ô∏è‚É£ A√ß√µes por Or√ßamento (Listagem)

Cada or√ßamento deve ter um bot√£o/menu de a√ß√µes, independente da visualiza√ß√£o (grid/cards/kanban):

Editar

Visualizar

Exportar para PDF

Clonar

Marcar como Desistido

Marcar como Abandonado

Gerar P√°gina P√∫blica

Enviar por Email

3Ô∏è‚É£ Cria√ß√£o / Edi√ß√£o de Or√ßamento (Tela com Abas)

A cria√ß√£o e edi√ß√£o de um or√ßamento deve ser feita em uma tela com abas (tabs):

üßæ Aba 1 ‚Äî Cliente

Sele√ß√£o ou visualiza√ß√£o dos dados do cliente

Permitir reutiliza√ß√£o de clientes j√° cadastrados

üìÑ Aba 2 ‚Äî Cabe√ßalho do Or√ßamento

Campos n√£o edit√°veis:

C√≥digo do or√ßamento

Data de cria√ß√£o

Campos edit√°veis:

Data de validade da proposta

Origem do or√ßamento

Observa√ß√µes

Outros campos relevantes (ex: respons√°vel, refer√™ncia interna, etc.)

üß∞ Aba 3 ‚Äî Produtos e Servi√ßos

Lan√ßamento de produtos e servi√ßos

Possibilidade de:

Agrupar itens

Visualizar subtotal por grupo

Visualizar valor total geral

Permitir:

Ajustar descri√ß√£o

Ajustar valores

‚ö†Ô∏è Essas altera√ß√µes s√£o exclusivas do or√ßamento

N√£o afetam o cadastro original

N√£o afetam outros or√ßamentos

Devem ser mantidas no clone, se escolhido

üí≥ Aba 4 ‚Äî Faturamento

Condi√ß√µes de pagamento (uma ou mais):

√Ä vista

A prazo

Cart√£o de d√©bito

Cart√£o de cr√©dito

Dinheiro

Pix

Boleto

Campos adicionais:

Descontos

Acr√©scimos

Deslocamento

O valor final do or√ßamento deve ser recalculado dinamicamente

4Ô∏è‚É£ P√°gina P√∫blica do Or√ßamento

Cada or√ßamento pode gerar uma URL p√∫blica

O cliente s√≥ pode acessar se:

Estiver dentro da data de validade OU

Status for:

Aprovado

Conclu√≠do

Faturado

Or√ßamento indispon√≠vel

Se o cliente acessar uma URL inv√°lida:

Redirecionar para uma p√°gina informativa

Exibir o c√≥digo do or√ßamento

Permitir enviar uma mensagem solicitando atualiza√ß√£o do or√ßamento

5Ô∏è‚É£ Clonagem de Or√ßamento

Ao clonar:

Perguntar:

‚ÄúDeseja atualizar os valores de acordo com os pre√ßos atuais do cadastro?‚Äù

Se sim:

Atualizar pre√ßos de produtos e servi√ßos

Se n√£o:

Manter os valores do or√ßamento original

6Ô∏è‚É£ Cabe√ßalho da Empresa (PDF e P√°gina P√∫blica)

No PDF e na URL p√∫blica, exibir:

Nome da empresa

Logo

CNPJ

Endere√ßo

Contatos

Como cabe√ßalho padr√£o do or√ßamento

7Ô∏è‚É£ A√ß√µes na P√°gina P√∫blica (Cliente)

O cliente poder√°:

Exportar para PDF

Imprimir

A√ß√µes de decis√£o:

Aprovar

Recusar

Abandonar

‚ö†Ô∏è Se a a√ß√£o for Recusar ou Abandonar, exigir:

Justificativa obrigat√≥ria

üß† Diretrizes T√©cnicas

Refatorar componentes para:

Reutiliza√ß√£o

Separa√ß√£o de responsabilidades

Boa organiza√ß√£o de estados

Backend:

Validar regras de status

Controlar permiss√µes de acesso √† URL p√∫blica

Garantir consist√™ncia ao clonar or√ßamentos

Frontend:

UX moderna

Feedback visual de status

Componentes desacoplados

Caso alguma regra descrita n√£o seja ideal:

Propor melhorias

Ajustar a l√≥gica explicando a decis√£o

üëâ Execute a refatora√ß√£o completa considerando c√≥digo limpo, escalabilidade, legibilidade e boas pr√°ticas.