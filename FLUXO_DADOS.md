# ğŸ”„ Fluxo de Dados - Sistema de Clientes

## ğŸ­ Arquitetura Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APLICAÃ‡ÃƒO ORÃ§HUB                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   FRONTEND (React + TypeScript)                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  ClientsPage.tsx (595 linhas)                           â”‚  â”‚
â”‚   â”‚  â”œâ”€ Estado (formData com 15+ campos)                    â”‚  â”‚
â”‚   â”‚  â”œâ”€ Tabela (7 colunas, display inteligente)            â”‚  â”‚
â”‚   â”‚  â””â”€ Modal (6 seÃ§Ãµes, handlers dinÃ¢micos)               â”‚  â”‚
â”‚   â”‚      â”œâ”€ ğŸ“‹ Dados BÃ¡sicos                               â”‚  â”‚
â”‚   â”‚      â”œâ”€ ğŸ  EndereÃ§o                                     â”‚  â”‚
â”‚   â”‚      â”œâ”€ âœ‰ï¸ Emails (array dinÃ¢mico)                      â”‚  â”‚
â”‚   â”‚      â”œâ”€ ğŸ“± Telefones (array dinÃ¢mico)                   â”‚  â”‚
â”‚   â”‚      â”œâ”€ ğŸŒ Redes Sociais (array dinÃ¢mico)              â”‚  â”‚
â”‚   â”‚      â””â”€ ğŸ“ ObservaÃ§Ãµes                                  â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  types/index.ts                                         â”‚  â”‚
â”‚   â”‚  â”œâ”€ Client interface                                    â”‚  â”‚
â”‚   â”‚  â”œâ”€ ClientEmail interface                              â”‚  â”‚
â”‚   â”‚  â”œâ”€ ClientPhone interface                              â”‚  â”‚
â”‚   â”‚  â””â”€ ClientSocialMedia interface                        â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  services/api.ts (axios client)                         â”‚  â”‚
â”‚   â”‚  â”œâ”€ createClient(data)                                 â”‚  â”‚
â”‚   â”‚  â”œâ”€ getClients()                                        â”‚  â”‚
â”‚   â”‚  â”œâ”€ getClient(id)                                      â”‚  â”‚
â”‚   â”‚  â”œâ”€ updateClient(id, data)                             â”‚  â”‚
â”‚   â”‚  â””â”€ deleteClient(id)                                   â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â¬‡ï¸ HTTP REST                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   BACKEND (NestJS + TypeScript)                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  POST   /clients          â†’ Controller.create()         â”‚  â”‚
â”‚   â”‚  GET    /clients          â†’ Controller.findAll()        â”‚  â”‚
â”‚   â”‚  GET    /clients/:id      â†’ Controller.findOne()        â”‚  â”‚
â”‚   â”‚  PATCH  /clients/:id      â†’ Controller.update()         â”‚  â”‚
â”‚   â”‚  DELETE /clients/:id      â†’ Controller.delete()         â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  â¬‡ï¸                                                       â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  ClientsService                                         â”‚  â”‚
â”‚   â”‚  â”œâ”€ create(dto)                                         â”‚  â”‚
â”‚   â”‚  â”‚  â””â”€ Prisma.client.create() com include              â”‚  â”‚
â”‚   â”‚  â”‚     â”œâ”€ emails[]                                      â”‚  â”‚
â”‚   â”‚  â”‚     â”œâ”€ phones[]                                      â”‚  â”‚
â”‚   â”‚  â”‚     â””â”€ socialMedia[]                                 â”‚  â”‚
â”‚   â”‚  â”‚                                                      â”‚  â”‚
â”‚   â”‚  â”œâ”€ findAll()                                           â”‚  â”‚
â”‚   â”‚  â”‚  â””â”€ Prisma.client.findMany() com include            â”‚  â”‚
â”‚   â”‚  â”‚                                                      â”‚  â”‚
â”‚   â”‚  â”œâ”€ findOne(id)                                         â”‚  â”‚
â”‚   â”‚  â”‚  â””â”€ Prisma.client.findUnique() com include          â”‚  â”‚
â”‚   â”‚  â”‚                                                      â”‚  â”‚
â”‚   â”‚  â”œâ”€ update(id, dto)                                     â”‚  â”‚
â”‚   â”‚  â”‚  â”œâ”€ Atualiza Client                                  â”‚  â”‚
â”‚   â”‚  â”‚  â”œâ”€ Delete/Recria ClientEmail[]                      â”‚  â”‚
â”‚   â”‚  â”‚  â”œâ”€ Delete/Recria ClientPhone[]                      â”‚  â”‚
â”‚   â”‚  â”‚  â””â”€ Delete/Recria ClientSocialMedia[]                â”‚  â”‚
â”‚   â”‚  â”‚                                                      â”‚  â”‚
â”‚   â”‚  â””â”€ delete(id)                                          â”‚  â”‚
â”‚   â”‚     â””â”€ Prisma.client.delete() â†’ cascade automÃ¡tico     â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  DTOs (ValidaÃ§Ã£o)                                       â”‚  â”‚
â”‚   â”‚  â”œâ”€ CreateClientDto                                     â”‚  â”‚
â”‚   â”‚  â”œâ”€ UpdateClientDto                                     â”‚  â”‚
â”‚   â”‚  â”œâ”€ ClientResponseDto                                   â”‚  â”‚
â”‚   â”‚  â””â”€ Nested: ClientEmail, ClientPhone, ClientSocialMedia â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â¬‡ï¸ Prisma ORM                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   BANCO DE DADOS (PostgreSQL)                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  Table: Client                                          â”‚  â”‚
â”‚   â”‚  â”œâ”€ id (PK)                                             â”‚  â”‚
â”‚   â”‚  â”œâ”€ name (NOT NULL)                                     â”‚  â”‚
â”‚   â”‚  â”œâ”€ nickname                                            â”‚  â”‚
â”‚   â”‚  â”œâ”€ cpfCnpj (UNIQUE)                                    â”‚  â”‚
â”‚   â”‚  â”œâ”€ status (ACTIVE|INACTIVE|BLOCKED)                   â”‚  â”‚
â”‚   â”‚  â”œâ”€ street                                              â”‚  â”‚
â”‚   â”‚  â”œâ”€ number                                              â”‚  â”‚
â”‚   â”‚  â”œâ”€ neighborhood                                        â”‚  â”‚
â”‚   â”‚  â”œâ”€ city                                                â”‚  â”‚
â”‚   â”‚  â”œâ”€ zipCode                                             â”‚  â”‚
â”‚   â”‚  â”œâ”€ state                                               â”‚  â”‚
â”‚   â”‚  â”œâ”€ observations                                        â”‚  â”‚
â”‚   â”‚  â”œâ”€ createdAt                                           â”‚  â”‚
â”‚   â”‚  â””â”€ updatedAt                                           â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  â¬‡ï¸ 1-to-Many                                           â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  Table: ClientEmail                                     â”‚  â”‚
â”‚   â”‚  â”œâ”€ id (PK)                                             â”‚  â”‚
â”‚   â”‚  â”œâ”€ clientId (FK â†’ Client.id)                           â”‚  â”‚
â”‚   â”‚  â”œâ”€ email (NOT NULL)                                    â”‚  â”‚
â”‚   â”‚  â””â”€ primary (BOOLEAN)                                   â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  Table: ClientPhone                                     â”‚  â”‚
â”‚   â”‚  â”œâ”€ id (PK)                                             â”‚  â”‚
â”‚   â”‚  â”œâ”€ clientId (FK â†’ Client.id)                           â”‚  â”‚
â”‚   â”‚  â”œâ”€ phone (NOT NULL)                                    â”‚  â”‚
â”‚   â”‚  â”œâ”€ hasWhatsapp (BOOLEAN)                               â”‚  â”‚
â”‚   â”‚  â””â”€ primary (BOOLEAN)                                   â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  Table: ClientSocialMedia                               â”‚  â”‚
â”‚   â”‚  â”œâ”€ id (PK)                                             â”‚  â”‚
â”‚   â”‚  â”œâ”€ clientId (FK â†’ Client.id)                           â”‚  â”‚
â”‚   â”‚  â”œâ”€ platform (STRING)                                   â”‚  â”‚
â”‚   â”‚  â””â”€ url (STRING)                                        â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  Ãndices:                                               â”‚  â”‚
â”‚   â”‚  â”œâ”€ Client.cpfCnpj (UNIQUE)                             â”‚  â”‚
â”‚   â”‚  â”œâ”€ ClientEmail.clientId (INDEX)                        â”‚  â”‚
â”‚   â”‚  â”œâ”€ ClientPhone.clientId (INDEX)                        â”‚  â”‚
â”‚   â”‚  â””â”€ ClientSocialMedia.clientId (INDEX)                  â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â”‚  Cascade Delete:                                        â”‚  â”‚
â”‚   â”‚  â””â”€ DELETE Client â†’ Deleta ClientEmail, Phone, etc.    â”‚  â”‚
â”‚   â”‚                                                          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Fluxo: Criar Novo Cliente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CRIAR NOVO CLIENTE - Fluxo Completo                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USUÃRIO NO FRONTEND:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ClientsPage                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ [+ Novo Cliente]         â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ CLIQUE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Abre Modal                   â”‚
â”‚ handleNew() chamado          â”‚
â”‚ â”œâ”€ resetFormData = {}        â”‚
â”‚ â””â”€ setModalOpen = true       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UsuÃ¡rio Preenche Campos     â”‚
â”‚ â”œâ”€ Nome: "JoÃ£o Silva" *      â”‚
â”‚ â”œâ”€ CPF: "123.456.789-00"     â”‚
â”‚ â”œâ”€ Email: "joao@ex.com"      â”‚
â”‚ â”œâ”€ Telefone: "(11) 99999..."  â”‚
â”‚ â””â”€ [Criar Cliente]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ CLIQUE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleSave() chamado        â”‚
â”‚ â”œâ”€ validateForm()            â”‚
â”‚ â”‚  â””â”€ Verifica:              â”‚
â”‚ â”‚     â”œâ”€ Nome obrigatÃ³rio âœ“  â”‚
â”‚ â”‚     â”œâ”€ Email obrigatÃ³rio âœ“ â”‚
â”‚ â”‚     â””â”€ Telefone obr. âœ“     â”‚
â”‚ â””â”€ ValidaÃ§Ã£o OK âœ“            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Call:                    â”‚
â”‚ api.createClient(formData)   â”‚
â”‚                              â”‚
â”‚ Payload JSON:                â”‚
â”‚ {                            â”‚
â”‚   "name": "JoÃ£o Silva",      â”‚
â”‚   "cpfCnpj": "123.456...",   â”‚
â”‚   "status": "ACTIVE",        â”‚
â”‚   "street": "Rua...",        â”‚
â”‚   "emails": [                â”‚
â”‚     {                        â”‚
â”‚       "email": "joao@..",    â”‚
â”‚       "primary": true        â”‚
â”‚     }                        â”‚
â”‚   ],                         â”‚
â”‚   "phones": [                â”‚
â”‚     {                        â”‚
â”‚       "phone": "(11)...",    â”‚
â”‚       "hasWhatsapp": true,   â”‚
â”‚       "primary": true        â”‚
â”‚     }                        â”‚
â”‚   ],                         â”‚
â”‚   "socialMedia": [...]       â”‚
â”‚ }                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ POST /clients
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND (NestJS)             â”‚
â”‚ ClientsController.create()   â”‚
â”‚ â””â”€ @Body() createClientDto   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ValidaÃ§Ã£o de DTO             â”‚
â”‚ â”œâ”€ @IsNotEmpty("name")       â”‚
â”‚ â”œâ”€ @IsString("cpfCnpj")      â”‚
â”‚ â”œâ”€ @IsEmail(...) no email    â”‚
â”‚ â”œâ”€ @IsArray(emails)          â”‚
â”‚ â”œâ”€ @ValidateNested()         â”‚
â”‚ â””â”€ ValidaÃ§Ã£o OK âœ“            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ClientsService.create(dto)   â”‚
â”‚ â”œâ”€ Desestrutura:             â”‚
â”‚ â”‚  â”œâ”€ baseData = {...}       â”‚
â”‚ â”‚  â”œâ”€ emails = [...]         â”‚
â”‚ â”‚  â”œâ”€ phones = [...]         â”‚
â”‚ â”‚  â””â”€ socialMedia = [...]    â”‚
â”‚ â””â”€ Destruct OK âœ“             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Prisma ORM                   â”‚
â”‚ prisma.client.create({       â”‚
â”‚   data: {                    â”‚
â”‚     ...baseData,             â”‚
â”‚     emails: {                â”‚
â”‚       create: [...]          â”‚
â”‚     },                        â”‚
â”‚     phones: {                â”‚
â”‚       create: [...]          â”‚
â”‚     },                        â”‚
â”‚     socialMedia: {           â”‚
â”‚       create: [...]          â”‚
â”‚     }                        â”‚
â”‚   },                         â”‚
â”‚   include: { ...all rels }   â”‚
â”‚ })                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL                   â”‚
â”‚ BEGIN TRANSACTION            â”‚
â”‚ â”œâ”€ INSERT INTO Client        â”‚
â”‚ â”‚  â””â”€ id, name, cpf, etc.    â”‚
â”‚ â”œâ”€ INSERT INTO ClientEmail   â”‚
â”‚ â”‚  â””â”€ id, clientId, email    â”‚
â”‚ â”œâ”€ INSERT INTO ClientPhone   â”‚
â”‚ â”‚  â””â”€ id, clientId, phone    â”‚
â”‚ â”œâ”€ INSERT INTO ...SocialM.   â”‚
â”‚ â”‚  â””â”€ id, clientId, platform â”‚
â”‚ â””â”€ COMMIT                    â”‚
â”‚                              â”‚
â”‚ âœ“ Todos os INSERTs OK        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Response com:                â”‚
â”‚ {                            â”‚
â”‚   "id": "clz123abc",         â”‚
â”‚   "name": "JoÃ£o Silva",      â”‚
â”‚   "emails": [{...}],         â”‚
â”‚   "phones": [{...}],         â”‚
â”‚   "socialMedia": [{...}],    â”‚
â”‚   ...                        â”‚
â”‚ }                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ 200 OK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND Recebe Response     â”‚
â”‚ handleSave() continua:       â”‚
â”‚ â”œâ”€ setModalOpen = false      â”‚
â”‚ â”œâ”€ await loadClients()       â”‚
â”‚ â””â”€ Nova requisiÃ§Ã£o GET       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ GET /clients
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND                      â”‚
â”‚ ClientsService.findAll()     â”‚
â”‚ â”œâ”€ prisma.client.findMany()  â”‚
â”‚ â”œâ”€ include: emails, phones   â”‚
â”‚ â””â”€ Retorna lista completa    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND                     â”‚
â”‚ setClients(response.data)    â”‚
â”‚ â””â”€ Tabela Re-renderiza       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… SUCESSO!                  â”‚
â”‚ Cliente aparece na tabela    â”‚
â”‚ Modal fechou                 â”‚
â”‚ FormulÃ¡rio resetado          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Fluxo: Editar Cliente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EDITAR CLIENTE - Fluxo Completo                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USUÃRIO NA TABELA:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [âœï¸ Editar]  [ğŸ—‘ï¸ Del]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ CLIQUE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleEdit(client) chamado        â”‚
â”‚ â”œâ”€ setEditingClient(client)       â”‚
â”‚ â”œâ”€ setFormData({                  â”‚
â”‚ â”‚    name: client.name,           â”‚
â”‚ â”‚    emails: client.emails || [], â”‚
â”‚ â”‚    phones: client.phones || [], â”‚
â”‚ â”‚    ... todos os campos          â”‚
â”‚ â”‚  })                             â”‚
â”‚ â””â”€ setModalOpen = true            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal abre com dados preenchidos   â”‚
â”‚ UsuÃ¡rio modifica alguns campos:    â”‚
â”‚ â”œâ”€ Adiciona novo email             â”‚
â”‚ â”œâ”€ Altera status para INACTIVE     â”‚
â”‚ â””â”€ [Atualizar Cliente]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ CLIQUE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleSave() chamado              â”‚
â”‚ â”œâ”€ validateForm() - OK âœ“           â”‚
â”‚ â”œâ”€ api.updateClient(id, data)      â”‚
â”‚ â””â”€ PATCH /clients/:id              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND                            â”‚
â”‚ ClientsService.update(id, dto)    â”‚
â”‚ â”œâ”€ Prisma: atualiza Client         â”‚
â”‚ â”œâ”€ Prisma: DELETE old emails       â”‚
â”‚ â”œâ”€ Prisma: CREATE new emails       â”‚
â”‚ â”œâ”€ Prisma: DELETE old phones       â”‚
â”‚ â”œâ”€ Prisma: CREATE new phones       â”‚
â”‚ â””â”€ Prisma: DELETE/CREATE socialM.  â”‚
â”‚                                    â”‚
â”‚ Retorna cliente atualizado         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ 200 OK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND                           â”‚
â”‚ handleSave() continua:            â”‚
â”‚ â”œâ”€ loadClients() - Recarrega lista â”‚
â”‚ â”œâ”€ setModalOpen = false            â”‚
â”‚ â””â”€ Tabela re-renderiza             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… SUCESSO!                        â”‚
â”‚ Dados atualizados na tabela        â”‚
â”‚ Modal fechou                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Fluxo: Deletar Cliente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DELETAR CLIENTE - Fluxo Completo                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USUÃRIO NA TABELA:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [âœï¸ Editar]  [ğŸ—‘ï¸ Del]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ CLIQUE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleDelete(client) chamado      â”‚
â”‚ â”œâ”€ window.confirm(mensagem)       â”‚
â”‚ â”œâ”€ UsuÃ¡rio clica OK               â”‚
â”‚ â””â”€ api.deleteClient(client.id)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ DELETE /clients/:id
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND                            â”‚
â”‚ ClientsService.delete(id)         â”‚
â”‚ â””â”€ prisma.client.delete({          â”‚
â”‚      where: { id }                 â”‚
â”‚    })                              â”‚
â”‚                                    â”‚
â”‚ Cascade Delete AutomÃ¡tico:        â”‚
â”‚ â”œâ”€ DELETE ClientEmail              â”‚
â”‚ â”œâ”€ DELETE ClientPhone              â”‚
â”‚ â”œâ”€ DELETE ClientSocialMedia        â”‚
â”‚ â””â”€ DELETE Client                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸ 200 OK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND                           â”‚
â”‚ handleDelete() continua:          â”‚
â”‚ â”œâ”€ loadClients() - Recarrega      â”‚
â”‚ â””â”€ Tabela re-renderiza             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â¬‡ï¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… SUCESSO!                        â”‚
â”‚ Cliente removido da tabela         â”‚
â”‚ Todas as relaÃ§Ãµes deletadas        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Resumo dos Fluxos

| OperaÃ§Ã£o | Endpoints | Status | ValidaÃ§Ãµes |
|----------|-----------|--------|------------|
| **CREATE** | POST /clients | 201 | Nome, Email, Telefone obrig. |
| **READ** | GET /clients | 200 | Sem validaÃ§Ã£o |
| **READ ONE** | GET /clients/:id | 200 | ID deve existir |
| **UPDATE** | PATCH /clients/:id | 200 | ID deve existir |
| **DELETE** | DELETE /clients/:id | 204 | ID deve existir |

---

## ğŸ” ValidaÃ§Ãµes em Cadeia

```
Frontend            Backend           Database
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FormField           DTO               Schema
HTML5 validation    @IsNotEmpty()     NOT NULL
type="email"        @IsEmail()        VARCHAR(255)
required            @ValidateNested() UNIQUE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ValidaÃ§Ã£o           ValidaÃ§Ã£o         Constraints
UX Feedback         HTTP 400          Rollback
```

---

## ğŸ’¾ Estados da AplicaÃ§Ã£o

```
CLIENTES:
â”œâ”€ [] Vazio (sem clientes)
â”‚  â””â”€ Modal nÃ£o mostrado
â”‚  â””â”€ EmptyState exibido
â”‚
â”œâ”€ [1,2,3...] Com dados
â”‚  â”œâ”€ Tabela exibida
â”‚  â””â”€ Modal controlado pelo estado
â”‚
â””â”€ [error] Em caso de erro
   â””â”€ Erro exibido no modal

FORMDATA:
â”œâ”€ [] Novo cliente (campos vazios)
â”œâ”€ [filled] Cliente em ediÃ§Ã£o (preenchido)
â””â”€ [modifying] UsuÃ¡rio alterando (estado intermediÃ¡rio)

MODAL:
â”œâ”€ closed (modalOpen = false)
â”œâ”€ new (editingClient = null)
â”œâ”€ edit (editingClient = {...})
â””â”€ loading (submitLoading = true)
```

---

## ğŸ¯ Mapeamento Frontend â†’ Backend â†’ Database

```
FRONTEND            BACKEND           DATABASE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
name                name              name (VARCHAR NOT NULL)
nickname            nickname          nickname (VARCHAR)
cpfCnpj             cpfCnpj           cpf_cnpj (VARCHAR UNIQUE)
status              status            status (VARCHAR DEFAULT 'ACTIVE')
street              street            street (VARCHAR)
number              number            number (VARCHAR)
neighborhood        neighborhood      neighborhood (VARCHAR)
city                city              city (VARCHAR)
zipCode             zipCode           zip_code (VARCHAR)
state               state             state (VARCHAR)

emails: [{          ClientEmailDto[]  Table: ClientEmail
  email,                              â”œâ”€ id (PK)
  primary                             â”œâ”€ client_id (FK)
}]                                    â”œâ”€ email
                                      â””â”€ primary

phones: [{          ClientPhoneDto[]  Table: ClientPhone
  phone,                              â”œâ”€ id (PK)
  hasWhatsapp,                        â”œâ”€ client_id (FK)
  primary                             â”œâ”€ phone
}]                                    â”œâ”€ has_whatsapp
                                      â””â”€ primary

socialMedia: [{     ClientSocialM...  Table: ClientSocialMedia
  platform,                           â”œâ”€ id (PK)
  url                                 â”œâ”€ client_id (FK)
}]                                    â”œâ”€ platform
                                      â””â”€ url

observations        observations      observations (TEXT)
```

---

**Fluxo Completo Mapeado âœ¨**
